<%- include('partials/header', {title: 'April Wayne - Blog', currentPage:
'blog'}) %>

<main class="main-content">
  <div class="content-container">
    <!-- Add New Post Button -->
    <div class="blog-actions">
      <a href="/blog/create" class="create-post-btn">
        <i class="fas fa-plus-circle"></i> New Post
      </a>
    </div>

    <div class="blog-posts">
      <% for (let key in posts) { %>
      <article class="blog-post">
        <!-- Post Actions -->
        <div class="post-actions">
          <a
            href="/blog/edit/<%= key %>"
            class="action-btn edit-btn"
            title="Edit Post"
          >
            <i class="fas fa-edit"></i>
          </a>
          <form
            action="/blog/delete/<%= key %>"
            method="post"
            class="delete-post-form"
            style="display: inline"
          >
            <button
              type="submit"
              class="action-btn delete-btn"
              title="Delete Post"
              onclick="return confirm('Are you sure you want to delete this post?');"
            >
              <i class="fas fa-trash-alt"></i>
            </button>
          </form>
        </div>

        <div class="post-summary">
          <h2 class="post-title">
            <a href="/blog/<%= key %>"><%= posts[key].title %></a>
          </h2>
          <div class="post-meta">
            <span class="post-date">
              <i class="far fa-calendar"></i> <%= posts[key].date %>
            </span>
            <span class="post-author">
              <i class="far fa-user"></i> <%= posts[key].author %>
            </span>
          </div>
          <div class="post-tags">
            <% posts[key].tags.forEach(function(tag) { %>
            <span class="tag"><i class="fas fa-tag"></i> <%= tag %></span>
            <% }); %>
          </div>
          <p class="post-excerpt">
            <%= posts[key].body.substring(0, 150) %>...
          </p>
          <a href="/blog/<%= key %>" class="read-more-btn">
            Read More <span class="arrow">â†’</span>
          </a>
        </div>
      </article>
      <% } %>
    </div>
  </div>
</main>

<%- include('partials/footer') %>
